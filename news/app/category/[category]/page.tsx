import { db, type NewsItem } from "@/app/_lib/sql";
import NewsItems from "@/components/newspostitems";

export default async function CategoryPage({
  params,
}: {
  params: { category: string };
}) {
  const categoryName = await params.category;
  console.log(categoryName);
  const cat = categoryName.replace(/%20/g, " ").replace(/%26/g, "&");

  const sourcedata = {
    "Computers & Internet": [
      0.0730258, 0.0146723, -0.06148, -0.0319446, 0.0205101, 0.0455541,
      0.0188329, 0.0306369, -0.0390929, 0.0323165, 0.0035122, -0.0124207,
      -0.0318814, 0.0063138, -0.05382, 0.0936389, -0.0276648, 0.0196979,
      -0.0456339, -0.0151326, -0.0336066, 0.0325778, -0.0361923, -0.0001881,
      0.0127723, -0.0226918, -0.0591178, -0.0080948, -0.1607743, 0.0729017,
      -0.0070674, 0.024689,
    ],
    Health: [
      0.0176649, 0.0271061, -0.0590198, 0.018667, 0.0168019, 0.0241553,
      -0.0004065, 0.0517354, -0.0113213, -0.020787, 0.0960253, -0.0097086,
      -0.0134476, 0.0095017, -0.0576318, 0.1105605, 0.0135758, -0.0121367,
      -0.0376675, -0.0330197, 0.0270587, 0.0374099, 0.0021984, 0.0067245,
      0.0117121, 0.0069208, -0.0312206, -0.0359369, -0.0803097, 0.1898539,
      -0.0419047, -0.0234319,
    ],
    "Business & Finance": [
      0.0486089, 0.0472392, -0.0622146, -0.0028585, 0.0337738, 0.0213161,
      -0.0136908, 0.0138288, 0.0003517, -0.0436706, -0.041783, -0.0008248,
      -0.0112378, -0.0018543, -0.0439735, 0.162669, 0.0165773, 0.0910413,
      -0.0310895, -0.1254553, 0.0112971, 0.0216447, -0.0408194, -0.015181,
      -0.0031067, 0.0230316, -0.0855158, -0.0208328, -0.0687348, 0.1133793,
      0.0059198, -0.0330839,
    ],
    "Entertainment & Music": [
      0.07889, 0.0350897, -0.0772266, -0.0045783, -0.0135443, 0.0017068,
      -0.0019398, 0.0157703, -0.0399155, -0.00616, 0.0563929, -0.0061335,
      -0.0015373, 0.012858, -0.0177991, 0.0791036, -0.0213635, 0.0658627,
      0.0038356, -0.0673348, -0.038275, 0.0036954, 0.0032694, 0.0371245,
      0.0721407, -0.0198492, -0.0950752, -0.039159, -0.0793202, 0.136933,
      0.0080935, -0.0765004,
    ],
    "Science & Mathematics": [
      0.0261513, 0.0052319, -0.0343034, -0.0167023, -0.0085618, -0.0154619,
      0.0260992, 0.0374787, -0.0255103, -0.0279538, -0.0211613, -0.0044843,
      -0.0642713, 0.0222429, -0.0675812, 0.1508229, 0.0220713, 0.0241598,
      -0.0359771, -0.0582148, 0.0257482, -0.0038425, 0.0007155, -0.056226,
      -0.0229942, 0.0160716, 0.0067966, -0.0102516, -0.1578597, 0.1461161,
      -0.0537274, -0.0577996,
    ],
    "Education & Reference": [
      0.0531371, -0.0013637, -0.054801, 0.0049184, 0.0168406, 0.0077047,
      0.0146729, 0.0565709, -0.0274934, 0.0182435, -0.0106073, -0.0553846,
      -0.0270294, -0.0309016, -0.0402901, 0.1452878, 0.0427003, 0.0413115,
      -0.0163795, -0.0382901, -0.0469228, 0.0029934, -0.0053322, 0.0046651,
      -0.0238914, -0.0365903, -0.0625198, -0.0297513, -0.1385159, 0.1482359,
      0.0111397, -0.0680804,
    ],
    "Family & Relationships": [
      0.0595608, -0.0094411, -0.0370543, -0.0043377, 0.0255101, 0.0420032,
      -0.0306665, 0.0293163, -0.0135123, -0.0135467, -0.0316587, -0.0313828,
      -0.0684437, -0.0251816, -0.0519554, 0.1006509, 0.0148852, 0.0854218,
      -0.0742177, -0.0968428, -0.0407296, 0.0306202, 0.0110408, -0.0253517,
      0.0001269, 0.019471, -0.0919431, -0.047965, -0.1067389, 0.1718354,
      0.0177942, -0.0246709,
    ],
    "Society & Culture": [
      0.0502158, 0.0733453, -0.0120506, -0.0217856, 0.0161266, -0.0002813,
      -0.0231446, 0.0617184, -0.0129316, -0.0587458, 0.0007969, 0.0173586,
      -0.0204112, 0.0116297, -0.0445674, 0.1231866, -0.043245, 0.0444264,
      -0.0353631, -0.0548699, 0.0356771, -0.0141578, 0.0208257, -0.0205615,
      -0.019932, 0.0287612, -0.0177799, -0.0596032, -0.1364119, 0.0861679,
      -0.0761103, -0.0147609,
    ],
    "Politics & Government": [
      0.0615582, -0.0233216, -0.002305, -0.0138012, 0.0328286, -0.021925,
      0.0498741, 0.0792246, -0.0136463, -0.0069543, -0.1187553, 0.0701388,
      0.0171486, 0.0514636, -0.0218809, 0.1265726, 0.0469507, 0.0723831,
      0.0010029, -0.0540182, 0.041594, 0.0393827, -0.0153836, 0.0469397,
      0.0058926, 0.1114025, -0.0630387, 0.0226513, -0.1299948, 0.102352,
      -0.0696088, -0.0409679,
    ],
  };

  const data =
    (await db`select * from qa.ai ORDER BY embed <->  ${JSON.stringify(sourcedata[cat])} LIMIT 11`) as NewsItem[];

  return (
    <div className="min-h-screen">
      <div className="container mx-auto p-4">
        <h1 class="text-4xl lg:text-5xl font-bold text-foreground mb-4 leading-tight font-playfair">
          {cat}
        </h1>

        <NewsItems posts={data.slice(1, 11)} />
      </div>
    </div>
  );
}
